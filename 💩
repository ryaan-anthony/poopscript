#!/bin/bash

# Interpret the line
function interpret
{
  line=$*
  # Comments are skipped
  if [[ $line == "ğŸ‘ƒ"* ]]; then continue
  # Log mixed data to file
  elif [[ $line == "ğŸš½"* ]]; then eval "echo ${line/ğŸš½}" >> "ğŸš½.log"
  # Evaluate statements
  elif [[ $line == "ğŸ’©"* ]]; then eval "${line/ğŸ’©}"
  # Output text to stdout
  elif [[ $line ]]; then eval "echo $line"
  fi
}

# Read from user input
function interactive_mode
{
  while read -p "ğŸš» " line; do
    interpret $line
  done
}

# Read from file
function batch_mode
{
  while read -r line; do
    interpret $line
  done < "$1"
}

case "$1" in
  -i|--interactive)
    interactive_mode
    exit 0
    ;;
  *)
    batch_mode $*
    exit 0
    ;;
esac
